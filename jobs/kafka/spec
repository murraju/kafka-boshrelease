---
name: kafka

packages:
  - bosh-helpers
  - java
  - scala
  - zookeeper
  - kafka

templates:
  bin/job_properties.sh.erb: bin/job_properties.sh
  bin/kafka-broker_ctl.erb: bin/kafka-broker_ctl
  bin/monit_debugger: bin/monit_debugger
  config/consumer.properties.erb: config/consumer.properties
  config/log4j.properties.erb: config/log4j.properties
  config/producer.properties.erb: config/producer.properties
  config/test-log4j.properties.erb: config/test-log4j.properties
  config/tools-log4j.properties.erb: config/tools-log4j.properties
  config/zookeeper.properties.erb: config/zookeeper.properties
  config/server.properties.erb: config/server.properties
  data/properties.sh.erb: data/properties.sh
  helpers/ctl_setup.sh: helpers/ctl_setup.sh
  helpers/ctl_utils.sh: helpers/ctl_utils.sh

properties:
  zookeeper.user:
    description: "User which will own the Apache ZooKeeper services"
    default: "zookeeper"
  zookeeper.group:
    description: "Group which will own the Apache ZooKeeper services"
    default: "vcap"
  zookeeper.servers:
    description: "List of all Apache Zookeeper server host IP/hostnames"
  zookeeper.client_port:
    description: "The port to listen for client connections"
    default: 2181
  zookeeper.quorum_port:
    description: "Apache Zookeeper Client quorum port"
    default: 2888
  zookeeper.leader_election_port:
    description: "Apache Zookeeper Client leader election port"
    default: 3888
  zookeeper.purge_interval:
    description: "The time interval in hours for which the purge task has to be triggered"
    default: 24
  zookeeper.autopurge_snap_retain_count:
    description: "Number of most recent snapshots to retain"
    default: 3
  zookeeper.listen_address:
    description: "The address to listen for client connections"
    default: "0.0.0.0"
  zookeeper.cnx_timeout:
    description: "Sets the timeout value for opening connections for leader election notifications"
    default: 5
  zookeeper.election_algorim:
    description: "Election implementation to use"
    default: 3
  zookeeper.warning_threshold_ms:
    description: "A warning message will be output to the log whenever an fsync in the Transactional Log (WAL) takes longer than this value"
    default: 1000
  zookeeper.global_outstanding_limit:
    description: "Throttle outstanding client requests"
    default: 1000
  zookeeper.init_limit:
    description: "Amount of time, in ticks, to allow followers to connect and sync to a leader"
    default: 5
  zookeeper.leader_serves:
    description: "Leader accepts client connections"
    default: "yes"
  zookeeper.max_client_connections:
    description: "Limits the number of concurrent connections that a single client may make to a single member of the ZooKeeper ensemble"
    default: 60
  zookeeper.max_session_timeout:
    description: "the maximum session timeout in milliseconds that the server will allow the client to negotiate"
    default: 40000
  zookeeper.min_session_timeout:
    description: "the minimum session timeout in milliseconds that the server will allow the client to negotiate"
    default: 4000
  zookeeper.pre_allocation_size:
    description: "preAllocSize kilobytes for transaction log blocks"
    default: "64M"
  zookeeper.snap_count:
    description: "Number of transactions before a snapshot is started and a new transaction log file is created"
    default: 100000
  zookeeper.sync_limit:
    description: "Amount of time, in ticks, to allow followers to sync with ZooKeeper"
    default: 2
  zookeeper.tick_time:
    description: "The length of a single tick, which is the basic time unit used by ZooKeeper, as measured in milliseconds"
    default: 2000
  kafka.log.dirs:
    description: "Kafka log directory"
    default: "/var/vcap/sys/log/kafka"
  kafka.tmp.dir:
    description: "Kafka Zookeeper Snapshot directory"
    default: /tmp/zookeeper
  kafka.broker.port:
    description: "Broker listening port"
    default: 9092
  kafka.brokers:
    description: "List of Kafka Brokers"
